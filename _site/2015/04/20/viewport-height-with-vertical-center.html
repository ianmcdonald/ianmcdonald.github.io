<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Viewport height with vertical center</title>
<meta name="description" content="Quite often I find myself needing to responsively size a section to be 100% of theviewport height. This is really easy with CSS:">
<link href='http://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/css/main.css">
</head>

<body>
<a href="/">
<h1>Ian Mcdonald</h1>
</a>

<div class="post">
<header class="post-header">
<h2 class="post-title">Viewport height with vertical center</h2>
<p class="post-meta">04.20.2015</p>
</header>
<article class="post-content">
<p>Quite often I find myself needing to responsively size a section to be 100% of the
viewport height. This is really easy with CSS:</p>

<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.full-height</span> <span class="p">{</span>
    <span class="k">height</span><span class="o">:</span> <span class="m">100</span><span class="n">vh</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>Simple. This works great in most situations, but things can get ugly in older
mobile browsers. While usage of mobile browsers that don’t fully support viewport units
is quite low at the time of this writing, it is by no means non-existent. Here
is a (no jQuery) JavaScript solution for creating a full height, full width
element with some optional features we’ll talk about afterwards:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Viewport height with optional vertical center</span>
<span class="kd">function</span> <span class="nx">viewportHeight</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">divideBy</span><span class="p">,</span> <span class="nx">alignElem</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">fH</span><span class="p">,</span> <span class="nx">vH</span><span class="p">,</span> <span class="nx">dB</span><span class="p">,</span> <span class="nx">vA</span><span class="p">;</span>    
    <span class="c1">// Get the height of the viewport</span>
    <span class="kd">function</span> <span class="nx">gH</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fH</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>
        <span class="nx">vH</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span>
              <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientHeight</span>
              <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">;</span>
        <span class="c1">// Divide the viewport if specified</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">divideBy</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dB</span> <span class="o">=</span> <span class="nx">vH</span> <span class="o">/</span> <span class="nx">divideBy</span><span class="p">;</span>
            <span class="nx">vH</span> <span class="o">=</span> <span class="nx">dB</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// Write the styles for the selected element</span>
        <span class="kd">function</span> <span class="nx">writeHeight</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">fH</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">minHeight</span> <span class="o">=</span> <span class="nx">vH</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
            <span class="nx">fH</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span>     <span class="o">=</span> <span class="s1">&#39;100%&#39;</span><span class="p">;</span>
            <span class="nx">fH</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span>  <span class="o">=</span> <span class="s1">&#39;relative&#39;</span><span class="p">;</span>
            <span class="nx">fH</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span>   <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>
            <span class="nx">fH</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span>       <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>
            <span class="nx">fH</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span>      <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">fH</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">writeHeight</span><span class="p">();</span>     
            <span class="c1">// Vertically center inner element if specified</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">alignElem</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">vA</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="nx">alignElem</span><span class="p">);</span>
                <span class="nx">vA</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span>        <span class="o">=</span> <span class="s1">&#39;relative&#39;</span><span class="p">;</span>
                <span class="nx">vA</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span>             <span class="o">=</span> <span class="s1">&#39;50%&#39;</span><span class="p">;</span>
                <span class="nx">vA</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">webkitTransform</span> <span class="o">=</span> <span class="s1">&#39;translateY(-50%)&#39;</span><span class="p">;</span>
                <span class="nx">vA</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">mozTransform</span>    <span class="o">=</span> <span class="s1">&#39;translateY(-50%)&#39;</span><span class="p">;</span>
                <span class="nx">vA</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">msTransform</span>     <span class="o">=</span> <span class="s1">&#39;translateY(-50%)&#39;</span><span class="p">;</span>
                <span class="nx">vA</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">oTransform</span>      <span class="o">=</span> <span class="s1">&#39;translateY(-50%)&#39;</span><span class="p">;</span>
                <span class="nx">vA</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">transform</span>       <span class="o">=</span> <span class="s1">&#39;translateY(-50%)&#39;</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="c1">// Set height after page load and on resize</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span> <span class="nx">gH</span><span class="p">);</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;resize&#39;</span><span class="p">,</span> <span class="nx">gH</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<p>The first parameter requires you to pass in your selector when you initialize
the function. The <em>optional</em> second and third parameters allow you to divide the viewport (creating
a half or quarter height element for example), and pass in a nested element to be
vertical centered within the section. If you don’t declare an argument for
<code>divideBy</code>, it defaults to full height (1). Note that if
you want to pass an argument to <code>alignElem</code> you need to declare a
number first.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">viewportHeight</span><span class="p">(</span><span class="s1">&#39;.full-height&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;.vertical-center&#39;</span><span class="p">);</span></code></pre></div>

<p>In the invocation above, I set an element with a class of <code>full-height</code> to be 100% of the
viewport height (divided by 1), with a nested element that has a class of
<code>vertical-center</code> to be vertically aligned relative to <code>.full-height</code>.</p>

</article>
<a href="/" class="back-home">Back to index</a>
</div>

<script src="/js/main.js" async></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-39674900-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
